- **Spring Security**
    - Spring 기반의 애플리케이션에서 인증과 인가를 처리하기 위한 보안 프레임워크

  | 구성요소 | 설명 |
      | --- | --- |
  | `SecurityFilterChain` | 필터 체인 등록, URL별 보안 설정 담당 |
  | `AuthenticationManager` | 인증 처리 주체 |
  | `UserDetailsService` | 사용자 정보를 DB 등에서 가져오는 인터페이스 |
  | `UserDetails` | 사용자 객체를 정의하는 인터페이스 |
  | `PasswordEncoder` | 패스워드 암호화 (주로 `BCryptPasswordEncoder`) |
  | `@EnableWebSecurity` | Spring Security 설정 클래스에 부여하는 어노테이션 |
- **인증(Authentication)과 인가(Authorization)**
    - 인증 : 사용자가 누구인지 확인 (authenticated()로 인증 여부 확인)
    - 인가 : 사용자가 어떤 권한을 가지고 있는지 확인 (hasRole(”ADMIN”)같은 걸로 처리)
    - 보통 인증은 로그인할 때, 인가는 로그인 후 특정 기능 접근 시에 확인
    - Spring Security가 위의 과정을 필터 체인으로 자동 저리해줌
- **세션과 토큰**
    - 세션과 토큰은 웹에서 로그인 상태를 유지하거나 사용자를 식별하기 위한 방식
    - 세션 (Session)
        - 서버가 로그인 정보를 기억하는 방식
        - 동작원리
            - 사용자가 로그인하면 서버는 세션 ID를 생성함
            - 서버는 세션 ID를 기준으로 로그인 정보를 메모리에 저장
            - 클라이언트에게 세션 ID를 쿠키에 담아 전달
            - 이후 요청에서 클라이언트는 세션ID 쿠키를 서버에 함께 전송
            - 서버는 세션 ID를 조회해 해당 사용자 정보를 불러옴
        - 장점
            - 구현이 간단하다
            - 서버가 관리하므로 보안적으로 안정적이다
        - 단점
            - 서버에 session data를 저장하기 때문에 메모리 부담이 있다
            - 서버가 분산될 경우 session 공유 문제가 생긴다
            - 앱이나 API기반 시스템에서는 적합하지 않다
    - 토큰(Token)
        - 클라이언트가 로그인 정보를 들고 다니는 방식
        - 동작원리
            - 사용자가 로그인하면 서버는 사용자 정보를 암호화된 토큰(JWT)을 발급
            - 클라이언트는 이 토큰을 저장 (로컬스토리지 등)
            - 이후 요청마다 Authorization 헤더에 토큰을 실어 보냄
            - 서버는 토큰을 검증하여 사용자 정보를 사용
        - 장점
            - 서버 확장에 유리
            - 모바일/SPA 앱에 최적화
            - REST API 기반 시스템에 적합
        - 단점
            - 클라이언트가 토큰을 가지고 있어서 유출 시 위험
            - 토큰 자체가 정보를 담고 있으므로, 만료되기 전까지 취소가 어려움
            - 토큰이 커서 네트워크 트래픽이 약간 증가할 수 있음
- **액세스 토큰(Access Token)과 리프레시 토큰(Refresh Token)**
    - 액세스 토큰(Access Token)
        - 로그인한 사용자의 인증 정보를 담은 토큰
        - 사용자가 보호된 리소스(API 등)에 접근할 수 있도록 해줌
        - 보안상의 이유로 유효기간이 15분~1시간으로 짧음
        - 토큰이 만료되면 API요청 실패 (401 Unauthorized)
        - 새로 로그인하거나, 리프레시 토큰을 이용해 갱신
    - 리프레시 토큰(Refresh Token)
        - 액세스 토큰을 재발급받기 위한 토큰
        - 사용자가 다시 로그인하지 않아도, 액세스 토큰을 새로 받을 수 있게 해줌
        - 2주~한달 이상의 유효기간
        - 유효기간이 길어서 서버에서 보안 철저하게 관리 필요
        - 주로 서버 DB 또는 클라이언트의 HttpOnly 쿠키에 저장
        - 액세스 토큰 만료 시, 리프레시 토큰을 보내면 서버가 확인하고 새 액세스 토큰 발급